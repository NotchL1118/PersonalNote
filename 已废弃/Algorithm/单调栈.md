# 单调栈

单调栈可以用来求一个数组中，某个元素离他最近的比他大/比他小的元素

需要明白，单调栈中存的就是已经遍历过的所有元素

比如，求一个数组中每个元素左边最接近他且比他小的元素，求不到就返回-1

[3,4,1,2]

-1，3，-1，1

用一个单调栈，每次遇到新的元素x~1~，如果栈空，或者栈顶元素比新元素x~1~小，那么最近的比x~1~小的数就是栈顶元素

如果栈顶元素y大于新元素x~1~，说明如果后面再遇到一个元素x~2~，y和x~!~相比，他肯定会选择x~1~而不是y，因为x~1~离他更近啊

x~1~和y都满足性质，但是y更靠前，所以可以直接去掉。

## 单调性

单调栈可以用来求，元素x左边/右边中大于/小于该元素且离他最近的数，四种情况，单调性都不一样

### 左边最近且更小的数

如果a~x~ > a~y~ 且x < y ，那么小于a~x~的数肯定小于a~y~且y的索引值更靠后，所以a~x~肯定要被删掉，所以栈中元素前面的值都是小于等于他的，也就是单调递增的。

写的也是这个思路，栈里面比新元素大的都要出栈

> 做题的时候有个快捷的方法，遇到一个新的数，如果比栈顶元素大，那么栈顶元素肯定就是答案，反之就入栈，可以这样快速判断

### 左边最近且更大的数

如果a~x~ < a~y~ 且x < y ，那么小于a~x~的数肯定小于a~y~且y的索引值更靠后，所以a~x~肯定要被删掉，所以栈中元素前面的值都是大于等于他的，也就是单调递减的。

### 右边最近且更小的数

这个需要变更一下，之前都是根据根据单调栈stack来更新索引i的答案，这个需要根据索引i来更新单调栈中之前的数的答案

遇到一个新的值x，如果比栈顶的元素更小，那么说明这个新值的索引就是栈顶元素的答案，如果大于等于他，就入栈，期待后面能遇到一个比他小的值。说明栈是单调递增的

### 右边最近且更大的数

遇到一个新的值x，如果比栈顶的元素更大，那么说明这个新值的索引就是栈顶元素的答案，如果小于他，就入栈，期待后面能遇到一个比他大的值。说明栈是单调递减的

> 也可以这么想，遇到一个值，求他后面的数，现在肯定没法求，要等到遍历到后面的值了才能知道，如果后面遇到一个值，比他大了，那不就是答案了吗，所以后面能入栈的值，肯定比他小的